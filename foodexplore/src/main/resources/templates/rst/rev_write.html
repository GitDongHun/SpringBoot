<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

	<head>
    <!-- 공통적으로 들어가는 부분 가져오는 코드 -->
    <head th:insert="~{include/head.html}"></head>

    <!-- 타이틀 수정 및 자기 html의 head에 추가한 것 추가하기 -->
    <title>먹스플로어</title>

	<!-- <script type="text/javascript" th:src="@{/js/upload.js}"></script>	 -->
	<link th:href="@{/css/upload.css}" rel="stylesheet" />

	<script type="text/javascript" th:src="@{/js/writeupload.js}"></script>	

    </head>
    
    <script>
    function starInput() {
        var starInput = document.getElementById("starInput");
        var selectedValue = starInput.value;
    }
    </script>

    <body>
        <!-- Navigation-->
        <nav th:insert="~{include/nav.html}"></nav>
        
        <div class="contentbox" >
            <div id="backgroundbanner"></div>
            <div class="bodycontent">
			<div class="content" style="display: flex;justify-content: center;padding-top: 40px;">
			<div style="text-align: left;">
               <h5>리뷰를 작성해주세요!</h5>
               <div>
			<div>
			        <h1 th:text="${rst_name}"></h1>
			        <br>
			        <form th:action="@{/rst/write}" method="post" enctype="multipart/form-data">
					    <div>
					        <input type="text" name="rev_title" placeholder="리뷰 제목" required/>
					    </div>
					    <div>
					        별점: <input type="number" min="1" max="5" th:value="${rev_star}" name="rev_star" id="starInput" onchange="updateStarValue()" required/>
					    </div>
					    <div>
					        <textarea rows="6" cols="50" name="rev_comment" placeholder="리뷰 내용" required></textarea>
					    </div>

						<div class="forupload">
				            <!-- <input type="file" name="files" id="files" onchange="setThumbnail(event);" accept="image/*" multiple />  -->
							<input type="file" name="files" id="files" accept="image/*" multiple /> 

							<div class="uploadResult">
								<ul>

								</ul>
							</div>
							<div id="response"></div>

						</div>

					    <div style="text-align: right;">					    
					    	<button type="submit">작성</button>
					    </div>
			            <input type="hidden" name="rst_name" th:value="${rst_name}" />
    					<input type="hidden" name="rst_id" th:value="${rst_id}" />

					</form>
			</div>
              </div>
			</div>
            </div>
           </div>
           </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>


		<script>
			$(document).ready(function() {
			  $("input[type='file']").on("change", function() {
				var files = this.files;
				var uploadUL = $(".uploadResult ul");
                uploadUL.empty();
		  
				for (var i = 0; i < files.length; i++) {
				  var reader = new FileReader();
		  
				  reader.onload = function(event) {

					var liElement = $("<li>");
					var divElement = $("<div>");

					var imgElement = $("<img>");
					imgElement.attr("src", event.target.result);

					divElement.append("<br>").append(imgElement);
                    liElement.append(divElement);
                    uploadUL.append(liElement);

				  };
		  
				  console.log(files[i]);
				  reader.readAsDataURL(files[i]);
				}
			  });

			  
			});
		  </script>
	

    </body>
</html>